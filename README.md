# 学校运动会管理系统

这是一个使用 C++17 标准编写的功能全面的学校运动会管理系统。它提供了一个基于命令行的界面，用于管理单位、运动员、比赛项目、报名、成绩记录、计分以及自动生成秩序册等功能。

## ✨ 核心功能

*   **单位与运动员管理**:
    *   支持添加、管理多个参赛单位（如学院）。
    *   在指定单位下添加和管理运动员信息（学号、姓名、性别）。
*   **赛事管理**:
    *   灵活创建比赛项目，可指定项目名称、男/女/混合组别、计时/计分赛类型。
    *   可为不同项目绑定不同的计分规则。
    *   能够删除不再需要的项目。
*   **报名管理**:
    *   运动员报名参加项目，系统会自动检查性别是否符合项目要求。
    *   系统会检查并限制每个运动员的最大报名项目数。
*   **成绩与计分**:
    *   录入运动员在各个项目中的比赛成绩。
    *   系统能根据预设的计分规则自动为项目进行计分，并将分数累加到单位总分。
*   **秩序册自动生成**:
    *   内置复杂的调度算法，可一键自动生成完整运动会秩序册。
    *   算法会处理场地和运动员的时间冲突，并强制保证运动员有足够的休息时间。
    *   算法通过启发式评估，力求日程安排的合理性与均衡性。
*   **信息查询**:
    *   按单位查询其所有运动员和总分。
    *   查询特定项目的详细信息和报名情况。
    *   查询运动员的个人报名情况和成绩。
*   **数据持久化**:
    *   支持将系统当前所有状态（包括单位、运动员、项目、成绩、报名信息等）备份到二进制文件。
    *   支持从备份文件中恢复数据，方便下次使用。
*   **高度可配置**:
    *   可自定义运动员最大参赛项目数。
    *   可设置比赛的总天数以及每日的比赛时间窗口。
    *   可动态创建和管理多种计分规则。

## 🛠️ 技术栈

*   **语言**: C++17
*   **构建系统**: CMake (跨平台)
*   **核心数据结构**: STL (Vectors, Maps, Unique Pointers)

## 🚀 设计与实现亮点

*   **面向对象设计**: 项目采用清晰的面向对象设计，将数据和逻辑封装在 `SportsMeet`, `Unit`, `Event`, `Schedule` 等类中，结构清晰，易于扩展。
*   **现代 C++ 实践**:
    *   广泛使用 `std::unique_ptr` 等智能指针进行自动内存管理，代码安全，有效避免内存泄漏。
    *   利用 C++17 的特性，代码更加现代化和简洁。
*   **解耦设计**: 用户界面 (`main.cpp`) 与核心业务逻辑 (`SportsMeet` 类) 分离，降低了模块间的耦合度。
*   **高级调度算法**: 秩序册生成采用了基于约束和启发式评估的贪心算法，能够处理复杂的调度问题。
*   **自定义二进制序列化**: 实现了轻量、高效的自定义二进制数据持久化方案，不依赖任何外部库，保证了数据存取的性能和程序的独立性。

## 🔧 如何编译与运行

本项目使用 CMake 进行构建，确保您的系统已经安装了支持 C++17 的编译器 (如 GCC, Clang, MSVC) 和 CMake。

1.  **克隆或下载项目**

2.  **创建 build 目录**:
    ```bash
    mkdir build
    cd build
    ```

3.  **生成构建文件 (以 Makefiles 为例)**:
    ```bash
    cmake ..
    ```
    *   如果你在 Windows 上使用 Visual Studio, 可以使用 `cmake .. -G "Visual Studio 17 2022"`。

4.  **编译项目**:
    ```bash
    cmake --build .
    ```
    *   或者直接使用 `make` (在 Unix-like 系统上) 或在 Visual Studio 中打开解决方案并编译。

5.  **运行程序**:
    编译成功后，可执行文件 `school_sports_app` (或 `school_sports_app.exe`) 会出现在 `build` 目录下。
    ```bash
    ./school_sports_app
    ```

## 📋 使用说明

程序启动后，会提示是否加载示例数据，方便快速体验。之后进入主菜单，根据数字提示进行操作：

1.  **学院与运动员管理**: 添加参赛单位和运动员。
2.  **赛事管理**: 创建比赛项目。
3.  **报名管理**: 为运动员报名项目。
4.  **比赛成绩管理**: 录入成绩并自动计分。
5.  **信息查询**: 查看各类信息。
6.  **秩序册管理**: 生成和显示秩序册。
7.  **数据备份与恢复**: 保存或加载 `sports_meet.dat` 文件。
8.  **计分规则管理**: 自定义计分体系。
9.  **系统设置**: 调整全局参数。
10. **退出系统**。

## 📂 项目结构

```
SchoolSports-Cpp3/
├── CMakeLists.txt         # CMake 构建配置文件
├── include/                 # 头文件目录
│   ├── Athlete.h
│   ├── BackupData.h
│   ├── Event.h
│   ├── Gender.h
│   ├── Result.h
│   ├── Schedule.h
│   ├── ScoringRule.h
│   ├── SportsMeet.h
│   ├── TimeUtils.h
│   └── Unit.h
├── src/                     # 源文件目录
│   ├── Athlete.cpp
│   ├── Event.cpp
│   ├── main.cpp             # 程序入口和用户界面
│   ├── Schedule.cpp
│   ├── SportsMeet.cpp       # 核心业务逻辑实现
│   └── Unit.cpp
└── sports_meet.dat          # 默认的数据备份文件
``` 